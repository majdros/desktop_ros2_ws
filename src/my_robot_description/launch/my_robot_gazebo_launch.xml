<launch>

    <!-- Pfade definieren -->
    <let name="urdf_path" 
        value="$(find-pkg-share my_robot_description)/urdf/my_robot.urdf.xacro"/>
    
    <let name="rviz2_config_path" 
            value="$(find-pkg-share my_robot_description)/config/my_robot.rviz"/>



    <let name="view_rplidar_c1_launch_path" 
            value="$(find-pkg-share rplidar_ros)/launch/view_rplidar_c1_launch.py" />

    <!-- LiDAR Launch-Datei einbinden -->
    <include file="$(var view_rplidar_c1_launch_path)" />



    <!-- Robot State Publisher -->
    <node pkg="robot_state_publisher" exec="robot_state_publisher">
        <param name="robot_description" value="$(command 'xacro $(var urdf_path)')"/>
    </node>

    <!-- <node pkg="robot_state_publisher" exec="robot_state_publisher">
        <param name="robot_description" value="$(command 'xacro $(find-pkg-share my_robot_description)/urdf/my_robot.urdf.xacro')"/>
    </node> -->


    
    <!-- RViz Node -->
    <node pkg="rviz2" exec="rviz2" name="rviz2" output="screen"
            args="-d $(var rviz2_config_path)"/>

    <!-- Gazebo Launch-Datei einbinden -->
    <include file="/opt/ros/humble/share/gazebo_ros/launch/gazebo.launch.py"/>

    <!-- Roboter in Gazebo spawnen -->
    <node pkg="gazebo_ros" exec="spawn_entity.py" name="spawn_entity" output="screen"
        args="-topic robot_description -entity my_robot_description" />

</launch>